"use strict";(()=>{var e={};e.id=177,e.ids=[177],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2658:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{GET:()=>l,dynamic:()=>u});var s=r(9303),o=r(8716),n=r(670),p=r(7070),i=r(912);let u="force-dynamic";async function l(e,{params:t}){try{let e=`${(0,i.v2)()}/players/${(0,i.xy)(t.tag)}`;console.log("Fetching player data from:",e);let r=await fetch(e,{headers:(0,i.$V)(),cache:"no-store"});if(!r.ok){let e=await r.text();return console.error("Supercell API error",r.status,e),p.NextResponse.json({code:r.status,message:e||r.statusText},{status:r.status})}let a=await r.json(),s={name:a.name,tag:(a.tag||"").replace("#",""),trophies:a.trophies,bestTrophies:a.bestTrophies,expLevel:a.expLevel,arena:a.arena?.name,clan:a.clan?.name??null,wins:a.wins,losses:a.losses,threeCrownWins:a.threeCrownWins},o=p.NextResponse.json(s);return o.headers.set("Cache-Control","private, max-age=30"),o}catch(e){return console.error("Route crash",e),p.NextResponse.json({code:500,message:e.message||"Internal error"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/player/[tag]/route",pathname:"/api/player/[tag]",filename:"route",bundlePath:"app/api/player/[tag]/route"},resolvedPagePath:"/home/project/app/api/player/[tag]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:g}=c,m="/api/player/[tag]/route";function v(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},912:(e,t,r)=>{function a(){return"true"===process.env.USE_PROXY?"https://proxy.royaleapi.dev/v1":"https://api.clashroyale.com/v1"}function s(e){return`%23${String(e).replace(/^#/,"").toUpperCase()}`}function o(){if(!process.env.SUPERCELL_TOKEN)throw Error("Missing SUPERCELL_TOKEN env");return{Authorization:`Bearer ${process.env.SUPERCELL_TOKEN}`}}r.d(t,{$V:()=>o,v2:()=>a,xy:()=>s})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(2658));module.exports=a})();