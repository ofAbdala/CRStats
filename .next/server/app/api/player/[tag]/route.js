"use strict";(()=>{var e={};e.id=177,e.ids=[177],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},38585:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>y,patchFetch:()=>w,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>f});var r={};a.r(r),a.d(r,{GET:()=>g,dynamic:()=>d,runtime:()=>u});var s=a(49303),n=a(88716),o=a(60670),i=a(87070),l=a(67093),c=a(82851),p=a(57435);let u="nodejs",d="force-dynamic";async function g(e,{params:t}){try{let e=`${(0,l.v2)()}/players/${(0,l.xy)(t.tag)}`;p.k.api("GET /api/player/[tag]",{tag:t.tag});let a=await (0,c.q)(e,{headers:(0,l.$V)()});if(!a.ok){let e=await a.text().catch(()=>"");return p.k.error("Supercell API error",{status:a.status,tag:t.tag}),i.NextResponse.json({error:!0,status:a.status,body:e||a.statusText},{status:a.status})}let r=await a.json(),s={name:r.name,tag:(r.tag||"").replace("#",""),trophies:r.trophies,bestTrophies:r.bestTrophies,expLevel:r.expLevel,arena:r.arena?.name||"Unknown Arena",arenaId:r.arena?.id,clan:r.clan?.name??null,clanTag:r.clan?.tag??null,clanBadgeId:r.clan?.badgeId??null,arenaIconUrl:function(e){if(!e)return null;let t={54e6:0,54000001:1,54000002:2,54000003:3,54000004:4,54000005:5,54000006:6,54000007:7,54000008:8,54000009:9,54000010:10,54000011:11,54000012:12,54000013:13,54000014:14,54000015:15,54000016:16,54000017:17,54000018:18,54000019:19,54000020:20,54000021:21,54000022:22}[e];return void 0===t?null:`https://cdn.royaleapi.com/static/img/arenas/arena${t}.png`}(r.arena?.id),leagueStatistics:r.leagueStatistics,badges:r.badges||[],wins:r.wins,losses:r.losses,threeCrownWins:r.threeCrownWins,donations:r.donations,donationsReceived:r.donationsReceived,totalDonations:r.totalDonations,warDayWins:r.warDayWins,clanCardsCollected:r.clanCardsCollected,starPoints:r.starPoints,expPoints:r.expPoints,currentDeck:r.currentDeck||[],cards:r.cards||[]},n=i.NextResponse.json(s);return n.headers.set("Cache-Control","private, max-age=15"),n}catch(e){return p.k.error("Failed to fetch player",e),i.NextResponse.json({error:!0,message:e.message},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/player/[tag]/route",pathname:"/api/player/[tag]",filename:"route",bundlePath:"app/api/player/[tag]/route"},resolvedPagePath:"/Users/sr.abdala/Documents/CRStats/CRStats/app/api/player/[tag]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:v}=m,y="/api/player/[tag]/route";function w(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:f})}},82851:(e,t,a)=>{a.d(t,{q:()=>r});async function r(e,t={},a={}){let r=a.timeoutMs??1e4,s=a.retries??2;for(let a=0;a<=s;a++){let n=new AbortController,o=setTimeout(()=>n.abort(),r);try{let a=await fetch(e,{...t,cache:"no-store",signal:n.signal,headers:{Accept:"application/json","User-Agent":"clash-next/1.0",...t.headers||{}}});return clearTimeout(o),a}catch(t){if(clearTimeout(o),a===s)throw t;let e=300*(a+1)+Math.floor(200*Math.random());await new Promise(t=>setTimeout(t,e))}}throw Error("unreachable")}},57435:(e,t,a)=>{a.d(t,{k:()=>s});class r{formatMessage(e,t,a){return{timestamp:new Date().toISOString(),level:e,message:t,data:a}}debug(e,t){if(this.isDevelopment){let a=this.formatMessage("debug",e,t);console.log(`[DEBUG] ${a.timestamp} - ${e}`,t||"")}}info(e,t){if(this.isDevelopment){let a=this.formatMessage("info",e,t);console.info(`[INFO] ${a.timestamp} - ${e}`,t||"")}}warn(e,t){let a=this.formatMessage("warn",e,t);console.warn(`[WARN] ${a.timestamp} - ${e}`,t||"")}error(e,t){let a=this.formatMessage("error",e,t);console.error(`[ERROR] ${a.timestamp} - ${e}`,t||"")}api(e,t){if(this.isDevelopment&&t){let a={route:e,...t};a.tag&&(a.tag=`#${String(a.tag).slice(0,3)}***`),this.debug("API Call",a)}}constructor(){this.isDevelopment=!1}}let s=new r},67093:(e,t,a)=>{function r(){return"false"===process.env.USE_PROXY?"https://api.clashroyale.com/v1":"https://proxy.royaleapi.dev/v1"}function s(e){return`%23${String(e).replace(/^#/,"").toUpperCase()}`}function n(){if(!process.env.SUPERCELL_TOKEN)throw Error("Missing SUPERCELL_TOKEN env");return{Authorization:`Bearer ${process.env.SUPERCELL_TOKEN}`}}a.d(t,{$V:()=>n,v2:()=>r,xy:()=>s})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(38585));module.exports=r})();