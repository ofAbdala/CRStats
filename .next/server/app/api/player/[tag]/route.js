"use strict";(()=>{var e={};e.id=177,e.ids=[177],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2658:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>h,routeModule:()=>u,serverHooks:()=>v,staticGenerationAsyncStorage:()=>d});var a={};t.r(a),t.d(a,{GET:()=>c,dynamic:()=>l});var s=t(9303),o=t(8716),n=t(670),p=t(7070),i=t(912);let l="force-dynamic";async function c(e,{params:r}){try{let e=`${(0,i.v2)()}/players/${(0,i.xy)(r.tag)}`;console.log("Fetching player data from:",e);let t=await fetch(e,{headers:(0,i.$V)(),cache:"no-store"});if(!t.ok){let e=await t.text();return console.error("Supercell API error",t.status,e),p.NextResponse.json({code:t.status,message:e||t.statusText},{status:t.status})}let a=await t.json(),s={name:a.name,tag:(a.tag||"").replace("#",""),trophies:a.trophies,bestTrophies:a.bestTrophies,expLevel:a.expLevel,arena:a.arena?.name,clan:a.clan?.name??null,wins:a.wins,losses:a.losses,threeCrownWins:a.threeCrownWins},o=p.NextResponse.json(s);return o.headers.set("Cache-Control","private, max-age=30"),o}catch(e){return console.error("Route crash",e),p.NextResponse.json({code:500,message:e.message||"Internal error"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/player/[tag]/route",pathname:"/api/player/[tag]",filename:"route",bundlePath:"app/api/player/[tag]/route"},resolvedPagePath:"/home/project/app/api/player/[tag]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:d,serverHooks:v}=u,g="/api/player/[tag]/route";function m(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:d})}},912:(e,r,t)=>{function a(){return console.log("Using proxy:",process.env.USE_PROXY,"Base URL will be:","true"===process.env.USE_PROXY?"https://proxy.royaleapi.dev/v1":"https://api.clashroyale.com/v1"),"true"===process.env.USE_PROXY?"https://proxy.royaleapi.dev/v1":"https://api.clashroyale.com/v1"}function s(e){return`%23${String(e).replace(/^#/,"").toUpperCase()}`}function o(){if(!process.env.SUPERCELL_TOKEN)throw Error("Missing SUPERCELL_TOKEN env");return{Authorization:`Bearer ${process.env.SUPERCELL_TOKEN}`}}t.d(r,{$V:()=>o,v2:()=>a,xy:()=>s})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,972],()=>t(2658));module.exports=a})();